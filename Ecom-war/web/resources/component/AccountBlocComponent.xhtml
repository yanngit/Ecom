<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:component="http://java.sun.com/jsf/composite/component"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <composite:interface>
    </composite:interface>
    <composite:implementation>
        <ui:fragment rendered="#{dataManagedBean.connected}">
            <h:form>
                <div id="accountBloc">
                    <h2>#{cc.attrs.title}</h2>
                    <div class="well well-small">
                        <ul class="thumbnails">
                            <li class="span1 thumbnail">
                                <h:commandButton action="#{dataManagedBean.setDisplayOrders(true)}" image="#{resource['img:my_orders.png']}" />
                            </li>
                            <li class="span1 thumbnail">
                                <h:commandButton action="#{dataManagedBean.setDisplayAddresses(true)}" image="#{resource['img:my_addresses.png']}" />
                            </li>
                            <li class="span1 thumbnail">
                                <h:commandButton action="#{dataManagedBean.disconnect()}" image="#{resource['img:logout.png']}" />
                            </li>
                        </ul>
                    </div>
                </div>    
            </h:form>  
            <ui:fragment rendered="#{dataManagedBean.getDisplayOrders()}">
                <div class="well well-small">
                    <ul class="thumbnails">
                        <li class="span3 thumbnail">
                            <h:form>
                                <h:commandButton image="#{resource['img:updiv.png']}" action="#{dataManagedBean.setDisplayOrders(false)}" ></h:commandButton>
                            </h:form>
                            <ui:repeat value="#{dataManagedBean.getOrdersOfAccount()}" var="item" varStatus="status">
                                <div>
                                    <f:view>
                                        <h:form>
                                            <h1><h:outputText value="List"/></h1>
                                            <h:dataTable value="#{dataManagedBean.ordersOfAccount}" var="item">
                                                <h:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Status"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.status}"/>
                                                </h:column>
                                                <h:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Id"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.id}"/>
                                                </h:column>
                                            </h:dataTable>
                                        </h:form>
                                    </f:view>

                                </div> 
                            </ui:repeat>
                        </li>
                    </ul>
                </div>
            </ui:fragment>
            <ui:fragment rendered="#{dataManagedBean.getDisplayAddresses()}">
                <h:form id="form-client-address" class="span5 offset4">
                    <component:FormAddressComponent title="Mon adresse" first_name="#{dataManagedBean.accountAddress.first_name}" surname="#{dataManagedBean.accountAddress.surname}" street="#{dataManagedBean.accountAddress.street}" postal_code="#{dataManagedBean.accountAddress.postal_code}" city="#{dataManagedBean.accountAddress.city}"/>
                </h:form>
            </ui:fragment>
        </ui:fragment>
    </composite:implementation>
</html>